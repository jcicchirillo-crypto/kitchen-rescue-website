# Add White-Label PDF Generation for Client Quotes

## Overview
Add PDF generation functionality so builders receive a white-label client-friendly PDF they can include in their quote packs. The PDF should NOT show Kitchen Rescue branding or builder uplift - it's completely white-label.

## Implementation Plan

### 1. Install Puppeteer
Add `puppeteer` to package.json dependencies for PDF generation.

### 2. Create PDF Template Module
Create `api/lib/pdfTemplates/clientQuoteTemplate.js`:
- Convert provided ES6 template to CommonJS (module.exports)
- White-label HTML template for client quotes
- Shows: builder name, postcode, weeks, pricing (NO uplift), what's included, requirements
- NO Kitchen Rescue branding visible to client

### 3. Create PDF Builder Utility
Create `api/lib/buildClientQuotePdf.js`:
- Convert provided ES6 code to CommonJS
- Uses Puppeteer to generate PDF from HTML template
- Saves PDFs to `public/quotes/` directory
- Returns file path and public URL

### 4. Update API Endpoint
Modify `/api/quote/send` in `api/server.js`:
- Import PDF builder and template
- Generate PDF using `totalBeforeUplift` (NOT totalAfterUplift - no builder margin shown)
- Attach PDF to email as "Temporary-Kitchen-Option.pdf"
- Update email HTML to mention the attached PDF
- Include PDF public URL in email as backup

### 5. Create Quotes Directory
Ensure `public/quotes/` directory exists (or create it programmatically)

## Key Requirements

- **White-label**: No Kitchen Rescue branding visible to client
- **No uplift shown**: Client sees `totalBeforeUplift`, builder sees `totalAfterUplift` in email
- **Professional**: Clean, builder-branded PDF they can include in quote packs
- **Attached to email**: PDF automatically attached to builder's email
- **Backup URL**: Public URL provided in case attachment fails

## Files to Create/Modify

1. **Create**: `api/lib/pdfTemplates/clientQuoteTemplate.js` - HTML template
2. **Create**: `api/lib/buildClientQuotePdf.js` - PDF generator
3. **Modify**: `api/server.js` - Update `/api/quote/send` endpoint
4. **Modify**: `package.json` - Add puppeteer dependency
5. **Create**: `public/quotes/` directory (or ensure it exists)

## Technical Notes

- Convert ES6 imports to CommonJS require()
- Use `quote.totalBeforeUplift` for client PDF (no builder margin)
- Use `quote.totalAfterUplift` in builder email (shows their margin)
- PDF format: A4, with proper margins
- File naming: `client-quote-{timestamp}.pdf`
