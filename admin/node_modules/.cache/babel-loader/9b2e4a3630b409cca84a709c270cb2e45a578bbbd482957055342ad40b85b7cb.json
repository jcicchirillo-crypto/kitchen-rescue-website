{"ast":null,"code":"import _objectSpread from\"/Users/jcicchirillo/kitchen-rescue-website/admin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{format,startOfMonth,endOfMonth,eachDayOfInterval,addMonths,subMonths,isToday}from'date-fns';import{CalendarDays,ChevronLeft,ChevronRight,CreditCard,Users,Mail,Loader2,Plus,Search,Settings,LogOut,Truck,Wallet,Calendar as CalendarIcon,MapPin,Phone,Clock}from'lucide-react';import{Button}from'./components/ui/button';import{Input}from'./components/ui/input';import{Label}from'./components/ui/label';import{Badge}from'./components/ui/badge';import{Textarea}from'./components/ui/textarea';import{Dialog,DialogContent,DialogDescription,DialogFooter,DialogHeader,DialogTitle}from'./components/ui/dialog';import{Table,TableBody,TableCell,TableHead,TableHeader,TableRow}from'./components/ui/table';// API helper functions\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_BASE_URL=window.location.origin;async function fetchBookings(token){const response=await fetch(\"\".concat(API_BASE_URL,\"/api/bookings\"),{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});if(!response.ok){throw new Error('Failed to fetch bookings');}const bookings=await response.json();// Convert date strings back to Date objects\nreturn bookings.map(booking=>_objectSpread(_objectSpread({},booking),{},{startDate:new Date(booking.startDate),endDate:new Date(booking.endDate),delivery:_objectSpread(_objectSpread({},booking.delivery),{},{date:new Date(booking.delivery.date)})}));}async function createBooking(booking,token){const response=await fetch(\"\".concat(API_BASE_URL,\"/api/bookings\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify(booking)});if(!response.ok){throw new Error('Failed to create booking');}return response.json();}async function updateBooking(id,updates,token){const response=await fetch(\"\".concat(API_BASE_URL,\"/api/bookings/\").concat(id),{method:'PUT',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify(updates)});if(!response.ok){throw new Error('Failed to update booking');}return response.json();}async function deleteBooking(id,token){const response=await fetch(\"\".concat(API_BASE_URL,\"/api/bookings/\").concat(id),{method:'DELETE',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});if(!response.ok){throw new Error('Failed to delete booking');}}async function syncToQuickBooks(bookingId,token){const response=await fetch(\"\".concat(API_BASE_URL,\"/api/quickbooks/sync-booking\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify({bookingId})});if(!response.ok){throw new Error('Failed to sync to QuickBooks');}return response.json();}const STATUS_MAP={Confirmed:{color:\"bg-emerald-50 text-emerald-700 border-emerald-200\",variant:\"success\"},\"Awaiting deposit\":{color:\"bg-amber-50 text-amber-700 border-amber-200\",variant:\"warning\"},Cancelled:{color:\"bg-red-50 text-red-700 border-red-200\",variant:\"destructive\"}};function MonthCalendar(_ref){let{month,bookings,onSelectBooking}=_ref;const days=eachDayOfInterval({start:startOfMonth(month),end:endOfMonth(month)});return/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-7 gap-2\",children:[[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"].map(d=>/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium text-muted-foreground text-center p-2\",children:d},d)),days.map(day=>/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-[90px] rounded-lg border p-2 relative \".concat(isToday(day)?\"border-primary bg-primary/5\":\"border-border bg-card\",\" hover:bg-accent/50 transition-colors\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-semibold text-foreground\",children:format(day,\"d\")}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 space-y-1\",children:bookings.filter(b=>day>=startOfMonth(month)&&day<=endOfMonth(month)&&day>=b.startDate&&day<=b.endDate).map(b=>{var _STATUS_MAP$b$status;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onSelectBooking(b.id),className:\"w-full text-left text-[11px] px-2 py-1 rounded-md truncate transition-colors hover:bg-background/80 \".concat(((_STATUS_MAP$b$status=STATUS_MAP[b.status])===null||_STATUS_MAP$b$status===void 0?void 0:_STATUS_MAP$b$status.color)||\"bg-muted text-muted-foreground\"),title:\"\".concat(b.id,\" \\u2022 \").concat(b.customer.name),children:[b.pod,\" \\u2014 \",b.customer.name.split(\" \")[0]]},b.id);})})]},+day))]});}function StatCard(_ref2){let{icon:Icon,label,value}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-card rounded-lg border p-6 shadow-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-muted-foreground\",children:label}),/*#__PURE__*/_jsx(Icon,{className:\"h-5 w-5 text-muted-foreground\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-foreground\",children:value})]});}export default function KitchenRescueAdmin(){var _STATUS_MAP$selected$;const[month,setMonth]=useState(new Date());const[query,setQuery]=useState(\"\");const[selectedId,setSelectedId]=useState(null);const[bookings,setBookings]=useState([]);const[isLoggedIn,setIsLoggedIn]=useState(false);const[showNewBookingDialog,setShowNewBookingDialog]=useState(false);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const filtered=bookings.filter(b=>{if(!(query!==null&&query!==void 0&&query.trim()))return true;const q=query.toLowerCase();return[b.id,b.customer.name,b.customer.email,b.customer.address,b.pod,b.status].join(\" \").toLowerCase().includes(q);});const selected=bookings.find(b=>b.id===selectedId)||null;// Load bookings when logged in\nconst loadBookings=async()=>{const token=localStorage.getItem('admin_token');if(!token)return;setLoading(true);setError(null);try{const data=await fetchBookings(token);setBookings(data);}catch(err){setError(err instanceof Error?err.message:'Failed to load bookings');}finally{setLoading(false);}};// Simple login check - replace with proper authentication\nuseEffect(()=>{const token=localStorage.getItem('admin_token');setIsLoggedIn(!!token);if(token){loadBookings();}},[]);const handleLogin=async e=>{e.preventDefault();const formData=new FormData(e.target);const username=formData.get('username');const password=formData.get('password');try{const response=await fetch(\"\".concat(API_BASE_URL,\"/api/admin/login\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,password})});if(response.ok){const{token}=await response.json();localStorage.setItem('admin_token',token);setIsLoggedIn(true);await loadBookings();}else{alert('Invalid credentials');}}catch(err){alert('Login failed. Please try again.');}};const handleLogout=()=>{localStorage.removeItem('admin_token');setIsLoggedIn(false);};const handleQuickBooksSync=async bookingId=>{const token=localStorage.getItem('admin_token');if(!token)return;try{setLoading(true);const result=await syncToQuickBooks(bookingId,token);alert(\"Booking synced to QuickBooks successfully! Invoice ID: \".concat(result.quickbooksId));}catch(err){alert(\"Failed to sync to QuickBooks: \".concat(err instanceof Error?err.message:'Unknown error'));}finally{setLoading(false);}};if(!isLoggedIn){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md bg-white rounded-xl shadow-lg p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-primary rounded-lg\",children:/*#__PURE__*/_jsx(Truck,{className:\"h-6 w-6 text-primary-foreground\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-foreground\",children:\"Kitchen Rescue Admin\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(Input,{id:\"username\",name:\"username\",type:\"text\",placeholder:\"Enter username\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(Input,{id:\"password\",name:\"password\",type:\"password\",placeholder:\"Enter password\",required:true})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"w-full\",children:\"Sign In\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 text-xs text-muted-foreground text-center\",children:\"Demo credentials: admin / kitchenrescue2024\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-muted/50\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"sticky top-0 z-20 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto max-w-7xl px-4 py-4 flex items-center gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-primary rounded-lg\",children:/*#__PURE__*/_jsx(Truck,{className:\"h-5 w-5 text-primary-foreground\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-foreground\",children:\"Kitchen Rescue \\u2014 Admin\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-auto flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"sm\",children:/*#__PURE__*/_jsx(Settings,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsxs(Button,{variant:\"outline\",size:\"sm\",className:\"gap-2\",onClick:handleLogout,children:[/*#__PURE__*/_jsx(LogOut,{className:\"h-4 w-4\"}),\"Log out\"]})]})]})}),/*#__PURE__*/_jsxs(\"main\",{className:\"mx-auto max-w-7xl p-6\",children:[error&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 p-4 bg-destructive/10 border border-destructive/20 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-destructive text-sm\",children:error}),/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"sm\",onClick:loadBookings,className:\"mt-2\",children:\"Retry\"})]}),loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center py-12\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"h-8 w-8 animate-spin text-primary\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-muted-foreground\",children:\"Loading bookings...\"})]}),!loading&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\",children:[/*#__PURE__*/_jsx(StatCard,{icon:CalendarIcon,label:\"Pods on hire\",value:bookings.length}),/*#__PURE__*/_jsx(StatCard,{icon:CreditCard,label:\"Deposits pending\",value:bookings.filter(b=>b.payment.status!==\"Deposit paid\").length}),/*#__PURE__*/_jsx(StatCard,{icon:Users,label:\"Customers\",value:new Set(bookings.map(b=>b.customer.email)).size}),/*#__PURE__*/_jsx(StatCard,{icon:Wallet,label:\"This month revenue\",value:\"\\xA3\".concat(bookings.reduce((s,b)=>s+(b.payment.status===\"Deposit paid\"?b.payment.amount:0),0).toFixed(0))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row md:items-center gap-4 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full md:w-80\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground\"}),/*#__PURE__*/_jsx(Input,{value:query,onChange:e=>setQuery(e.target.value),placeholder:\"Search bookings, customers, addresses\\u2026\",className:\"pl-10\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-auto flex items-center gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 bg-background rounded-lg border p-1\",children:[/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"sm\",onClick:()=>setMonth(subMonths(month,1)),children:/*#__PURE__*/_jsx(ChevronLeft,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-3 text-sm font-medium w-40 text-center\",children:format(month,\"MMMM yyyy\")}),/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"sm\",onClick:()=>setMonth(addMonths(month,1)),children:/*#__PURE__*/_jsx(ChevronRight,{className:\"h-4 w-4\"})})]}),/*#__PURE__*/_jsxs(Button,{onClick:()=>setShowNewBookingDialog(true),children:[/*#__PURE__*/_jsx(Plus,{className:\"h-4 w-4 mr-2\"}),\"New booking\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 xl:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"xl:col-span-2 bg-card rounded-lg border shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-semibold flex items-center gap-2 mb-4\",children:[/*#__PURE__*/_jsx(CalendarDays,{className:\"h-5 w-5\"}),\" Calendar\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-muted-foreground mb-6\",children:\"Month view of bookings. Click a booking to view details.\"}),/*#__PURE__*/_jsx(MonthCalendar,{month:month,bookings:filtered,onSelectBooking:setSelectedId})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-card rounded-lg border shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-semibold flex items-center gap-2 mb-4\",children:[/*#__PURE__*/_jsx(CreditCard,{className:\"h-5 w-5\"}),\" Payments\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-muted-foreground mb-6\",children:\"Recent deposits & balances\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:bookings.slice(0,5).map(b=>{var _STATUS_MAP$b$status2;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 rounded-lg border hover:bg-accent/50 cursor-pointer transition-colors\",onClick:()=>setSelectedId(b.id),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-sm\",children:b.id}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-muted-foreground\",children:b.customer.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(Badge,{variant:((_STATUS_MAP$b$status2=STATUS_MAP[b.status])===null||_STATUS_MAP$b$status2===void 0?void 0:_STATUS_MAP$b$status2.variant)||\"default\",className:\"text-xs\",children:b.payment.status}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium mt-1\",children:[\"\\xA3\",b.payment.amount.toFixed(0)]})]})]},b.id);})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-card rounded-lg border shadow-sm mt-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-semibold flex items-center gap-2 mb-4\",children:[/*#__PURE__*/_jsx(Users,{className:\"h-5 w-5\"}),\" Customers\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-muted-foreground mb-6\",children:\"Contact details and current hire info\"}),/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHeader,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableHead,{children:\"Customer\"}),/*#__PURE__*/_jsx(TableHead,{children:\"Contact\"}),/*#__PURE__*/_jsx(TableHead,{children:\"Address\"}),/*#__PURE__*/_jsx(TableHead,{children:\"Booking\"}),/*#__PURE__*/_jsx(TableHead,{children:\"Status\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:filtered.map(b=>{var _STATUS_MAP$b$status3;return/*#__PURE__*/_jsxs(TableRow,{className:\"hover:bg-accent/50\",children:[/*#__PURE__*/_jsx(TableCell,{className:\"font-medium\",children:b.customer.name}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm\",children:[/*#__PURE__*/_jsx(Mail,{className:\"h-3 w-3 text-muted-foreground\"}),b.customer.email]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-muted-foreground\",children:[/*#__PURE__*/_jsx(Phone,{className:\"h-3 w-3\"}),b.customer.phone]})]})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"h-3 w-3 text-muted-foreground\"}),b.customer.address]})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:b.pod}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-muted-foreground\",children:[format(b.startDate,\"d MMM\"),\" \\u2013 \",format(b.endDate,\"d MMM\")]})]})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Badge,{variant:((_STATUS_MAP$b$status3=STATUS_MAP[b.status])===null||_STATUS_MAP$b$status3===void 0?void 0:_STATUS_MAP$b$status3.variant)||\"default\",children:b.status})})]},b.id);})})]})]})})]})]}),/*#__PURE__*/_jsx(Dialog,{open:showNewBookingDialog,onOpenChange:setShowNewBookingDialog,children:/*#__PURE__*/_jsxs(DialogContent,{className:\"max-w-2xl\",children:[/*#__PURE__*/_jsxs(DialogHeader,{children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Create booking\"}),/*#__PURE__*/_jsx(DialogDescription,{children:\"Add a new temporary kitchen hire.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-4 py-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(Label,{children:\"Customer name\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"Full name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"email@domain.com\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(Label,{children:\"Phone\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"+44\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(Label,{children:\"Address\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"Delivery address\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(Label,{children:\"Pod\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"w-full h-10 rounded-md border border-input bg-background px-3 text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"16ft Pod\"}),/*#__PURE__*/_jsx(\"option\",{children:\"10ft Pod\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(Label,{children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"w-full h-10 rounded-md border border-input bg-background px-3 text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"Awaiting deposit\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Confirmed\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Cancelled\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(Label,{children:\"Start date\"}),/*#__PURE__*/_jsx(Input,{type:\"date\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(Label,{children:\"End date\"}),/*#__PURE__*/_jsx(Input,{type:\"date\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(Label,{children:\"Notes\"}),/*#__PURE__*/_jsx(Textarea,{placeholder:\"Access notes, packs, other details\"})]})]}),/*#__PURE__*/_jsxs(DialogFooter,{children:[/*#__PURE__*/_jsx(Button,{variant:\"outline\",onClick:()=>setShowNewBookingDialog(false),children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{children:\"Save booking\"})]})]})}),selected&&/*#__PURE__*/_jsx(Dialog,{open:!!selected,onOpenChange:o=>!o&&setSelectedId(null),children:/*#__PURE__*/_jsxs(DialogContent,{className:\"max-w-4xl max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(DialogHeader,{children:[/*#__PURE__*/_jsxs(DialogTitle,{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-1 bg-primary rounded\",children:/*#__PURE__*/_jsx(Truck,{className:\"h-4 w-4 text-primary-foreground\"})}),selected.id,\" \\u2022 \",selected.pod]}),/*#__PURE__*/_jsxs(DialogDescription,{children:[format(selected.startDate,\"EEE d MMM yyyy\"),\" \\u2013 \",format(selected.endDate,\"EEE d MMM yyyy\"),\" \\u2022\",/*#__PURE__*/_jsx(Badge,{variant:((_STATUS_MAP$selected$=STATUS_MAP[selected.status])===null||_STATUS_MAP$selected$===void 0?void 0:_STATUS_MAP$selected$.variant)||\"default\",className:\"ml-2\",children:selected.status})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6 py-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-muted/50 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-semibold mb-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Users,{className:\"h-4 w-4\"}),\"Customer Details\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:selected.customer.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-muted-foreground\",children:[/*#__PURE__*/_jsx(Mail,{className:\"h-3 w-3\"}),selected.customer.email]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-muted-foreground\",children:[/*#__PURE__*/_jsx(Phone,{className:\"h-3 w-3\"}),selected.customer.phone]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-muted-foreground\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"h-3 w-3\"}),selected.customer.address]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-muted/50 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-semibold mb-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(CreditCard,{className:\"h-4 w-4\"}),\"Payment Details\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Status: \",/*#__PURE__*/_jsx(Badge,{variant:selected.payment.status===\"Deposit paid\"?\"success\":\"warning\",className:\"ml-2\",children:selected.payment.status})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Deposit: \\xA3\",selected.payment.amount.toFixed(0),\" (\",selected.payment.method,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-muted-foreground\",children:\"Balance auto-invoice 7 days before delivery\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-2 flex gap-2\",children:[/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",children:\"Send payment link\"}),/*#__PURE__*/_jsx(Button,{size:\"sm\",children:\"Mark as paid\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-muted/50 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-semibold mb-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Clock,{className:\"h-4 w-4\"}),\"Delivery Details\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Date/time: \",format(selected.delivery.date,\"EEE d MMM, HH:mm\")]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Driver: \",selected.delivery.driver]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-muted-foreground\",children:selected.delivery.notes}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-2 flex gap-2\",children:[/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",children:\"Assign driver\"}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",children:\"Export job sheet\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-muted/50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold mb-3\",children:\"Internal Notes\"}),/*#__PURE__*/_jsx(Textarea,{defaultValue:selected.notes,className:\"min-h-[100px]\"}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-2 text-right\",children:/*#__PURE__*/_jsx(Button,{size:\"sm\",children:\"Save notes\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between pt-4\",children:[/*#__PURE__*/_jsx(Button,{variant:\"destructive\",size:\"sm\",children:\"Cancel booking\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsxs(Button,{variant:\"outline\",size:\"sm\",onClick:()=>handleQuickBooksSync(selected.id),disabled:loading,children:[loading?/*#__PURE__*/_jsx(Loader2,{className:\"h-4 w-4 animate-spin mr-2\"}):null,\"Sync to QuickBooks\"]}),/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"sm\",children:\"Email customer\"}),/*#__PURE__*/_jsx(Button,{size:\"sm\",children:\"Edit booking\"})]})]})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","format","startOfMonth","endOfMonth","eachDayOfInterval","addMonths","subMonths","isToday","CalendarDays","ChevronLeft","ChevronRight","CreditCard","Users","Mail","Loader2","Plus","Search","Settings","LogOut","Truck","Wallet","Calendar","CalendarIcon","MapPin","Phone","Clock","Button","Input","Label","Badge","Textarea","Dialog","DialogContent","DialogDescription","DialogFooter","DialogHeader","DialogTitle","Table","TableBody","TableCell","TableHead","TableHeader","TableRow","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_BASE_URL","window","location","origin","fetchBookings","token","response","fetch","concat","headers","ok","Error","bookings","json","map","booking","_objectSpread","startDate","Date","endDate","delivery","date","createBooking","method","body","JSON","stringify","updateBooking","id","updates","deleteBooking","syncToQuickBooks","bookingId","STATUS_MAP","Confirmed","color","variant","Cancelled","MonthCalendar","_ref","month","onSelectBooking","days","start","end","className","children","d","day","filter","b","_STATUS_MAP$b$status","onClick","status","title","customer","name","pod","split","StatCard","_ref2","icon","Icon","label","value","KitchenRescueAdmin","_STATUS_MAP$selected$","setMonth","query","setQuery","selectedId","setSelectedId","setBookings","isLoggedIn","setIsLoggedIn","showNewBookingDialog","setShowNewBookingDialog","loading","setLoading","error","setError","filtered","trim","q","toLowerCase","email","address","join","includes","selected","find","loadBookings","localStorage","getItem","data","err","message","handleLogin","e","preventDefault","formData","FormData","target","username","get","password","setItem","alert","handleLogout","removeItem","handleQuickBooksSync","result","quickbooksId","onSubmit","htmlFor","type","placeholder","required","size","length","payment","Set","reduce","s","amount","toFixed","onChange","slice","_STATUS_MAP$b$status2","_STATUS_MAP$b$status3","phone","open","onOpenChange","o","driver","notes","defaultValue","disabled"],"sources":["/Users/jcicchirillo/kitchen-rescue-website/admin/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { format, startOfMonth, endOfMonth, eachDayOfInterval, addMonths, subMonths, isToday } from 'date-fns';\nimport { \n  CalendarDays, \n  ChevronLeft, \n  ChevronRight, \n  CreditCard, \n  Users, \n  Mail, \n  Loader2, \n  Plus, \n  Search, \n  Settings, \n  LogOut, \n  Truck, \n  Wallet, \n  Calendar as CalendarIcon,\n  MapPin,\n  Phone,\n  Clock\n} from 'lucide-react';\n\nimport { Button } from './components/ui/button';\nimport { Input } from './components/ui/input';\nimport { Label } from './components/ui/label';\nimport { Badge } from './components/ui/badge';\nimport { Textarea } from './components/ui/textarea';\nimport { \n  Dialog, \n  DialogContent, \n  DialogDescription, \n  DialogFooter, \n  DialogHeader, \n  DialogTitle \n} from './components/ui/dialog';\nimport { \n  Table, \n  TableBody, \n  TableCell, \n  TableHead, \n  TableHeader, \n  TableRow \n} from './components/ui/table';\n\n// API helper functions\nconst API_BASE_URL = window.location.origin;\n\nasync function fetchBookings(token: string): Promise<Booking[]> {\n  const response = await fetch(`${API_BASE_URL}/api/bookings`, {\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n  });\n  \n  if (!response.ok) {\n    throw new Error('Failed to fetch bookings');\n  }\n  \n  const bookings = await response.json();\n  // Convert date strings back to Date objects\n  return bookings.map((booking: any) => ({\n    ...booking,\n    startDate: new Date(booking.startDate),\n    endDate: new Date(booking.endDate),\n    delivery: {\n      ...booking.delivery,\n      date: new Date(booking.delivery.date),\n    },\n  }));\n}\n\nasync function createBooking(booking: Partial<Booking>, token: string): Promise<Booking> {\n  const response = await fetch(`${API_BASE_URL}/api/bookings`, {\n    method: 'POST',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(booking),\n  });\n  \n  if (!response.ok) {\n    throw new Error('Failed to create booking');\n  }\n  \n  return response.json();\n}\n\nasync function updateBooking(id: string, updates: Partial<Booking>, token: string): Promise<Booking> {\n  const response = await fetch(`${API_BASE_URL}/api/bookings/${id}`, {\n    method: 'PUT',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(updates),\n  });\n  \n  if (!response.ok) {\n    throw new Error('Failed to update booking');\n  }\n  \n  return response.json();\n}\n\nasync function deleteBooking(id: string, token: string): Promise<void> {\n  const response = await fetch(`${API_BASE_URL}/api/bookings/${id}`, {\n    method: 'DELETE',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n  });\n  \n  if (!response.ok) {\n    throw new Error('Failed to delete booking');\n  }\n}\n\nasync function syncToQuickBooks(bookingId: string, token: string): Promise<any> {\n  const response = await fetch(`${API_BASE_URL}/api/quickbooks/sync-booking`, {\n    method: 'POST',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ bookingId }),\n  });\n  \n  if (!response.ok) {\n    throw new Error('Failed to sync to QuickBooks');\n  }\n  \n  return response.json();\n}\n\nconst STATUS_MAP: Record<string, { color: string; variant: \"default\" | \"secondary\" | \"destructive\" | \"success\" | \"warning\" | \"info\" }> = {\n  Confirmed: { color: \"bg-emerald-50 text-emerald-700 border-emerald-200\", variant: \"success\" },\n  \"Awaiting deposit\": { color: \"bg-amber-50 text-amber-700 border-amber-200\", variant: \"warning\" },\n  Cancelled: { color: \"bg-red-50 text-red-700 border-red-200\", variant: \"destructive\" },\n};\n\ninterface Booking {\n  id: string;\n  customer: {\n    name: string;\n    email: string;\n    phone: string;\n    address: string;\n  };\n  pod: string;\n  startDate: Date;\n  endDate: Date;\n  status: string;\n  payment: {\n    status: string;\n    amount: number;\n    currency: string;\n    method: string;\n  };\n  delivery: {\n    date: Date;\n    driver: string;\n    notes: string;\n  };\n  notes: string;\n}\n\nfunction MonthCalendar({\n  month,\n  bookings,\n  onSelectBooking,\n}: {\n  month: Date;\n  bookings: Booking[];\n  onSelectBooking: (bId: string) => void;\n}) {\n  const days = eachDayOfInterval({ start: startOfMonth(month), end: endOfMonth(month) });\n  \n  return (\n    <div className=\"grid grid-cols-7 gap-2\">\n      {[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"].map((d) => (\n        <div key={d} className=\"text-xs font-medium text-muted-foreground text-center p-2\">\n          {d}\n        </div>\n      ))}\n      {days.map((day) => (\n        <div \n          key={+day} \n          className={`min-h-[90px] rounded-lg border p-2 relative ${\n            isToday(day) ? \"border-primary bg-primary/5\" : \"border-border bg-card\"\n          } hover:bg-accent/50 transition-colors`}\n        >\n          <div className=\"text-xs font-semibold text-foreground\">{format(day, \"d\")}</div>\n          <div className=\"mt-1 space-y-1\">\n            {bookings\n              .filter((b) => day >= startOfMonth(month) && day <= endOfMonth(month) && day >= b.startDate && day <= b.endDate)\n              .map((b) => (\n                <button\n                  key={b.id}\n                  onClick={() => onSelectBooking(b.id)}\n                  className={`w-full text-left text-[11px] px-2 py-1 rounded-md truncate transition-colors hover:bg-background/80 ${\n                    STATUS_MAP[b.status]?.color || \"bg-muted text-muted-foreground\"\n                  }`}\n                  title={`${b.id} • ${b.customer.name}`}\n                >\n                  {b.pod} — {b.customer.name.split(\" \")[0]}\n                </button>\n              ))}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nfunction StatCard({ icon: Icon, label, value }: { icon: any; label: string; value: string | number }) {\n  return (\n    <div className=\"bg-card rounded-lg border p-6 shadow-sm\">\n      <div className=\"flex items-center justify-between mb-2\">\n        <h3 className=\"text-sm font-medium text-muted-foreground\">{label}</h3>\n        <Icon className=\"h-5 w-5 text-muted-foreground\" />\n      </div>\n      <div className=\"text-2xl font-bold text-foreground\">{value}</div>\n    </div>\n  );\n}\n\nexport default function KitchenRescueAdmin() {\n  const [month, setMonth] = useState(new Date());\n  const [query, setQuery] = useState(\"\");\n  const [selectedId, setSelectedId] = useState<string | null>(null);\n  const [bookings, setBookings] = useState<Booking[]>([]);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [showNewBookingDialog, setShowNewBookingDialog] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const filtered = bookings.filter((b) => {\n    if (!query?.trim()) return true;\n    const q = query.toLowerCase();\n    return [b.id, b.customer.name, b.customer.email, b.customer.address, b.pod, b.status]\n      .join(\" \")\n      .toLowerCase()\n      .includes(q);\n  });\n\n  const selected = bookings.find((b) => b.id === selectedId) || null;\n\n  // Load bookings when logged in\n  const loadBookings = async () => {\n    const token = localStorage.getItem('admin_token');\n    if (!token) return;\n    \n    setLoading(true);\n    setError(null);\n    try {\n      const data = await fetchBookings(token);\n      setBookings(data);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load bookings');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Simple login check - replace with proper authentication\n  useEffect(() => {\n    const token = localStorage.getItem('admin_token');\n    setIsLoggedIn(!!token);\n    if (token) {\n      loadBookings();\n    }\n  }, []);\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    const formData = new FormData(e.target as HTMLFormElement);\n    const username = formData.get('username');\n    const password = formData.get('password');\n    \n    try {\n      const response = await fetch(`${API_BASE_URL}/api/admin/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ username, password }),\n      });\n      \n      if (response.ok) {\n        const { token } = await response.json();\n        localStorage.setItem('admin_token', token);\n        setIsLoggedIn(true);\n        await loadBookings();\n      } else {\n        alert('Invalid credentials');\n      }\n    } catch (err) {\n      alert('Login failed. Please try again.');\n    }\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('admin_token');\n    setIsLoggedIn(false);\n  };\n\n  const handleQuickBooksSync = async (bookingId: string) => {\n    const token = localStorage.getItem('admin_token');\n    if (!token) return;\n    \n    try {\n      setLoading(true);\n      const result = await syncToQuickBooks(bookingId, token);\n      alert(`Booking synced to QuickBooks successfully! Invoice ID: ${result.quickbooksId}`);\n    } catch (err) {\n      alert(`Failed to sync to QuickBooks: ${err instanceof Error ? err.message : 'Unknown error'}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isLoggedIn) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4\">\n        <div className=\"w-full max-w-md bg-white rounded-xl shadow-lg p-8\">\n          <div className=\"flex items-center gap-3 mb-8\">\n            <div className=\"p-2 bg-primary rounded-lg\">\n              <Truck className=\"h-6 w-6 text-primary-foreground\" />\n            </div>\n            <h1 className=\"text-2xl font-bold text-foreground\">Kitchen Rescue Admin</h1>\n          </div>\n          \n          <form onSubmit={handleLogin} className=\"space-y-6\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"username\">Username</Label>\n              <Input\n                id=\"username\"\n                name=\"username\"\n                type=\"text\"\n                placeholder=\"Enter username\"\n                required\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">Password</Label>\n              <Input\n                id=\"password\"\n                name=\"password\"\n                type=\"password\"\n                placeholder=\"Enter password\"\n                required\n              />\n            </div>\n            <Button type=\"submit\" className=\"w-full\">\n              Sign In\n            </Button>\n          </form>\n          \n          <div className=\"mt-6 text-xs text-muted-foreground text-center\">\n            Demo credentials: admin / kitchenrescue2024\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-muted/50\">\n      {/* Top bar */}\n      <header className=\"sticky top-0 z-20 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n        <div className=\"mx-auto max-w-7xl px-4 py-4 flex items-center gap-3\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-primary rounded-lg\">\n              <Truck className=\"h-5 w-5 text-primary-foreground\" />\n            </div>\n            <span className=\"font-semibold text-foreground\">Kitchen Rescue — Admin</span>\n          </div>\n          <div className=\"ml-auto flex items-center gap-2\">\n            <Button variant=\"ghost\" size=\"sm\">\n              <Settings className=\"h-4 w-4\"/>\n            </Button>\n            <Button variant=\"outline\" size=\"sm\" className=\"gap-2\" onClick={handleLogout}>\n              <LogOut className=\"h-4 w-4\"/>Log out\n            </Button>\n          </div>\n        </div>\n      </header>\n\n      {/* Content */}\n      <main className=\"mx-auto max-w-7xl p-6\">\n        {/* Error message */}\n        {error && (\n          <div className=\"mb-6 p-4 bg-destructive/10 border border-destructive/20 rounded-lg\">\n            <p className=\"text-destructive text-sm\">{error}</p>\n            <Button \n              variant=\"outline\" \n              size=\"sm\" \n              onClick={loadBookings}\n              className=\"mt-2\"\n            >\n              Retry\n            </Button>\n          </div>\n        )}\n\n        {/* Loading state */}\n        {loading && (\n          <div className=\"flex items-center justify-center py-12\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n            <span className=\"ml-2 text-muted-foreground\">Loading bookings...</span>\n          </div>\n        )}\n\n        {/* KPI row */}\n        {!loading && (\n          <>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n          <StatCard icon={CalendarIcon} label=\"Pods on hire\" value={bookings.length} />\n          <StatCard icon={CreditCard} label=\"Deposits pending\" value={bookings.filter(b=>b.payment.status!==\"Deposit paid\").length} />\n          <StatCard icon={Users} label=\"Customers\" value={new Set(bookings.map(b=>b.customer.email)).size} />\n          <StatCard icon={Wallet} label=\"This month revenue\" value={`£${bookings.reduce((s,b)=> s + (b.payment.status===\"Deposit paid\"? b.payment.amount:0),0).toFixed(0)}`} />\n        </div>\n\n        {/* Toolbar */}\n        <div className=\"flex flex-col md:flex-row md:items-center gap-4 mb-8\">\n          <div className=\"relative w-full md:w-80\">\n            <Search className=\"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground\"/>\n            <Input \n              value={query} \n              onChange={(e)=>setQuery(e.target.value)} \n              placeholder=\"Search bookings, customers, addresses…\" \n              className=\"pl-10\"\n            />\n          </div>\n\n          <div className=\"ml-auto flex items-center gap-3\">\n            <div className=\"flex items-center gap-2 bg-background rounded-lg border p-1\">\n              <Button variant=\"ghost\" size=\"sm\" onClick={()=>setMonth(subMonths(month,1))}>\n                <ChevronLeft className=\"h-4 w-4\"/>\n              </Button>\n              <div className=\"px-3 text-sm font-medium w-40 text-center\">{format(month, \"MMMM yyyy\")}</div>\n              <Button variant=\"ghost\" size=\"sm\" onClick={()=>setMonth(addMonths(month,1))}>\n                <ChevronRight className=\"h-4 w-4\"/>\n              </Button>\n            </div>\n\n            <Button onClick={() => setShowNewBookingDialog(true)}>\n              <Plus className=\"h-4 w-4 mr-2\"/>New booking\n            </Button>\n          </div>\n        </div>\n\n        {/* Two-column layout: calendar + lists */}\n        <div className=\"grid grid-cols-1 xl:grid-cols-3 gap-8\">\n          <div className=\"xl:col-span-2 bg-card rounded-lg border shadow-sm\">\n            <div className=\"p-6\">\n              <h2 className=\"text-lg font-semibold flex items-center gap-2 mb-4\">\n                <CalendarDays className=\"h-5 w-5\"/> Calendar\n              </h2>\n              <p className=\"text-sm text-muted-foreground mb-6\">Month view of bookings. Click a booking to view details.</p>\n              <MonthCalendar month={month} bookings={filtered} onSelectBooking={setSelectedId} />\n            </div>\n          </div>\n\n          <div className=\"bg-card rounded-lg border shadow-sm\">\n            <div className=\"p-6\">\n              <h2 className=\"text-lg font-semibold flex items-center gap-2 mb-4\">\n                <CreditCard className=\"h-5 w-5\"/> Payments\n              </h2>\n              <p className=\"text-sm text-muted-foreground mb-6\">Recent deposits & balances</p>\n              <div className=\"space-y-3\">\n                {bookings.slice(0, 5).map((b) => (\n                  <div \n                    key={b.id} \n                    className=\"flex items-center justify-between p-3 rounded-lg border hover:bg-accent/50 cursor-pointer transition-colors\"\n                    onClick={()=>setSelectedId(b.id)}\n                  >\n                    <div>\n                      <div className=\"font-medium text-sm\">{b.id}</div>\n                      <div className=\"text-xs text-muted-foreground\">{b.customer.name}</div>\n                    </div>\n                    <div className=\"text-right\">\n                      <Badge variant={STATUS_MAP[b.status]?.variant || \"default\"} className=\"text-xs\">\n                        {b.payment.status}\n                      </Badge>\n                      <div className=\"text-sm font-medium mt-1\">£{b.payment.amount.toFixed(0)}</div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Customers table */}\n        <div className=\"bg-card rounded-lg border shadow-sm mt-8\">\n          <div className=\"p-6\">\n            <h2 className=\"text-lg font-semibold flex items-center gap-2 mb-4\">\n              <Users className=\"h-5 w-5\"/> Customers\n            </h2>\n            <p className=\"text-sm text-muted-foreground mb-6\">Contact details and current hire info</p>\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Customer</TableHead>\n                  <TableHead>Contact</TableHead>\n                  <TableHead>Address</TableHead>\n                  <TableHead>Booking</TableHead>\n                  <TableHead>Status</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {filtered.map((b) => (\n                  <TableRow key={b.id} className=\"hover:bg-accent/50\">\n                    <TableCell className=\"font-medium\">{b.customer.name}</TableCell>\n                    <TableCell>\n                      <div className=\"space-y-1\">\n                        <div className=\"flex items-center gap-2 text-sm\">\n                          <Mail className=\"h-3 w-3 text-muted-foreground\"/>\n                          {b.customer.email}\n                        </div>\n                        <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                          <Phone className=\"h-3 w-3\"/>\n                          {b.customer.phone}\n                        </div>\n                      </div>\n                    </TableCell>\n                    <TableCell>\n                      <div className=\"flex items-center gap-2 text-sm\">\n                        <MapPin className=\"h-3 w-3 text-muted-foreground\"/>\n                        {b.customer.address}\n                      </div>\n                    </TableCell>\n                    <TableCell>\n                      <div className=\"text-sm\">\n                        <div className=\"font-medium\">{b.pod}</div>\n                        <div className=\"text-muted-foreground\">\n                          {format(b.startDate, \"d MMM\")} – {format(b.endDate, \"d MMM\")}\n                        </div>\n                      </div>\n                    </TableCell>\n                    <TableCell>\n                      <Badge variant={STATUS_MAP[b.status]?.variant || \"default\"}>\n                        {b.status}\n                      </Badge>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </div>\n        </div>\n        </>\n        )}\n      </main>\n\n      {/* New Booking Dialog */}\n      <Dialog open={showNewBookingDialog} onOpenChange={setShowNewBookingDialog}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>Create booking</DialogTitle>\n            <DialogDescription>Add a new temporary kitchen hire.</DialogDescription>\n          </DialogHeader>\n          <div className=\"grid gap-4 py-4\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label>Customer name</Label>\n                <Input placeholder=\"Full name\" />\n              </div>\n              <div className=\"space-y-2\">\n                <Label>Email</Label>\n                <Input placeholder=\"email@domain.com\" />\n              </div>\n            </div>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label>Phone</Label>\n                <Input placeholder=\"+44\" />\n              </div>\n              <div className=\"space-y-2\">\n                <Label>Address</Label>\n                <Input placeholder=\"Delivery address\" />\n              </div>\n            </div>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label>Pod</Label>\n                <select className=\"w-full h-10 rounded-md border border-input bg-background px-3 text-sm\">\n                  <option>16ft Pod</option>\n                  <option>10ft Pod</option>\n                </select>\n              </div>\n              <div className=\"space-y-2\">\n                <Label>Status</Label>\n                <select className=\"w-full h-10 rounded-md border border-input bg-background px-3 text-sm\">\n                  <option>Awaiting deposit</option>\n                  <option>Confirmed</option>\n                  <option>Cancelled</option>\n                </select>\n              </div>\n            </div>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label>Start date</Label>\n                <Input type=\"date\" />\n              </div>\n              <div className=\"space-y-2\">\n                <Label>End date</Label>\n                <Input type=\"date\" />\n              </div>\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Notes</Label>\n              <Textarea placeholder=\"Access notes, packs, other details\"/>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowNewBookingDialog(false)}>Cancel</Button>\n            <Button>Save booking</Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Booking Details Sheet */}\n      {selected && (\n        <Dialog open={!!selected} onOpenChange={(o)=>!o && setSelectedId(null)}>\n          <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n            <DialogHeader>\n              <DialogTitle className=\"flex items-center gap-2\">\n                <div className=\"p-1 bg-primary rounded\">\n                  <Truck className=\"h-4 w-4 text-primary-foreground\" />\n                </div>\n                {selected.id} • {selected.pod}\n              </DialogTitle>\n              <DialogDescription>\n                {format(selected.startDate, \"EEE d MMM yyyy\")} – {format(selected.endDate, \"EEE d MMM yyyy\")} • \n                <Badge variant={STATUS_MAP[selected.status]?.variant || \"default\"} className=\"ml-2\">\n                  {selected.status}\n                </Badge>\n              </DialogDescription>\n            </DialogHeader>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 py-4\">\n              <div className=\"bg-muted/50 rounded-lg p-4\">\n                <h3 className=\"text-sm font-semibold mb-3 flex items-center gap-2\">\n                  <Users className=\"h-4 w-4\" />\n                  Customer Details\n                </h3>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"font-medium\">{selected.customer.name}</div>\n                  <div className=\"flex items-center gap-2 text-muted-foreground\">\n                    <Mail className=\"h-3 w-3\"/>{selected.customer.email}\n                  </div>\n                  <div className=\"flex items-center gap-2 text-muted-foreground\">\n                    <Phone className=\"h-3 w-3\"/>{selected.customer.phone}\n                  </div>\n                  <div className=\"flex items-center gap-2 text-muted-foreground\">\n                    <MapPin className=\"h-3 w-3\"/>{selected.customer.address}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-muted/50 rounded-lg p-4\">\n                <h3 className=\"text-sm font-semibold mb-3 flex items-center gap-2\">\n                  <CreditCard className=\"h-4 w-4\" />\n                  Payment Details\n                </h3>\n                <div className=\"space-y-2 text-sm\">\n                  <div>Status: <Badge variant={selected.payment.status === \"Deposit paid\" ? \"success\" : \"warning\"} className=\"ml-2\">\n                    {selected.payment.status}\n                  </Badge></div>\n                  <div>Deposit: £{selected.payment.amount.toFixed(0)} ({selected.payment.method})</div>\n                  <div className=\"text-xs text-muted-foreground\">Balance auto-invoice 7 days before delivery</div>\n                  <div className=\"pt-2 flex gap-2\">\n                    <Button size=\"sm\" variant=\"outline\">Send payment link</Button>\n                    <Button size=\"sm\">Mark as paid</Button>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-muted/50 rounded-lg p-4\">\n              <h3 className=\"text-sm font-semibold mb-3 flex items-center gap-2\">\n                <Clock className=\"h-4 w-4\" />\n                Delivery Details\n              </h3>\n              <div className=\"space-y-2 text-sm\">\n                <div>Date/time: {format(selected.delivery.date, \"EEE d MMM, HH:mm\")}</div>\n                <div>Driver: {selected.delivery.driver}</div>\n                <div className=\"text-xs text-muted-foreground\">{selected.delivery.notes}</div>\n                <div className=\"pt-2 flex gap-2\">\n                  <Button size=\"sm\" variant=\"outline\">Assign driver</Button>\n                  <Button size=\"sm\" variant=\"outline\">Export job sheet</Button>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-muted/50 rounded-lg p-4\">\n              <h3 className=\"text-sm font-semibold mb-3\">Internal Notes</h3>\n              <Textarea defaultValue={selected.notes} className=\"min-h-[100px]\"/>\n              <div className=\"pt-2 text-right\">\n                <Button size=\"sm\">Save notes</Button>\n              </div>\n            </div>\n\n            <div className=\"flex justify-between pt-4\">\n              <Button variant=\"destructive\" size=\"sm\">Cancel booking</Button>\n              <div className=\"flex gap-2\">\n                <Button \n                  variant=\"outline\" \n                  size=\"sm\"\n                  onClick={() => handleQuickBooksSync(selected.id)}\n                  disabled={loading}\n                >\n                  {loading ? <Loader2 className=\"h-4 w-4 animate-spin mr-2\" /> : null}\n                  Sync to QuickBooks\n                </Button>\n                <Button variant=\"outline\" size=\"sm\">Email customer</Button>\n                <Button size=\"sm\">Edit booking</Button>\n              </div>\n            </div>\n          </DialogContent>\n        </Dialog>\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}